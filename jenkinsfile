pipeline{
    agent any
    stages{
        stage('clone the code'){
            steps{
                git branch: 'master', url: 'https://github.com/Abhinav501-eng/mavenproject.git'
            }
        }
        stage('compile the code'){
            steps{
                withMaven(jdk: 'JAVA_HOME', maven: 'MAVEN_HOME', traceability: true) {
                  sh 'mvn compile'
             }
            }
        }
        stage('test the code'){
            steps{
                withMaven(jdk: 'JAVA_HOME', maven: 'MAVEN_HOME', traceability: true) {
                 sh 'mvn test' 
            }
            }
        }
        stage('build the code'){
            steps{
                withMaven(jdk: 'JAVA_HOME', maven: 'MAVEN_HOME', traceability: true) {
                 sh 'mvn package' 
            }
            }
        }
        // stage('deploy to tomcat server'){
        //    steps { 
        //    sshagent(['Deploytotomcat']) {
        //        sh 'scp -o StrictHostKeyChecking=no webapp/target/webapp.war ubuntu@18.143.169.176:/home/ubuntu/apache-tomcat-10.1.46/webapps'
        //    }}}
    }
}
